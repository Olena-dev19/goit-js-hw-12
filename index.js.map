{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\n\naxios.defaults.baseURL = \"https://pixabay.com/api/\";\naxios.defaults.params = {\n    key: \"51771971-26538829ed76446a8c68a5295\",\n    q: '',\n    image_type: 'photo',\n    orientation:'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page: '',\n}\n\nexport async function getImagesByQuery(query, page) {\n    const res = await axios.get('',\n        { params: { ...axios.defaults.params, q: query, page:page } })\n    return res.data;\n}\n\n\n","// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { currentPage } from \"../main.js\";\nimport { maxPage } from \"../main.js\";\n\n\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader-hidden');\nconst loadBtn = document.querySelector('.js-load-btn');\n\n\nlet galleryLight = null;\n\nexport function createGallery(images) {\n\n    let markup = images.map(image => `<li class=\"item-gallery\">\n        <a href=\"${image.largeImageURL}\"><img src=\"${image.webformatURL}\" alt=\"${image.tags}\" width=\"360px\" height=\"152px\"> </a>\n        <ul class=\"card-info\">\n          <li>\n            <h4>Likes</h4>\n            <p>${image.likes}</p>\n          </li>\n\n          <li>\n            <h4>Views</h4>\n            <p>${image.views}</p>\n          </li>\n          <li>\n            <h4>Comments</h4>\n            <p>${image.comments}</p>\n          </li>\n          <li>\n            <h4>Downloads</h4>\n            <p>${image.downloads}</p>\n          </li>\n        </ul>\n      </li>`).join('');\n    \n    gallery.insertAdjacentHTML('beforeend', markup);\n\n    if (!galleryLight) {\n        galleryLight = new SimpleLightbox('.gallery a', {\n            captionsData: 'alt',\n            captionDelay: 250\n        });\n    } else {\n        galleryLight.refresh();\n    }\n}\n\n\nexport function clearGallery() {\n    gallery.innerHTML = '';\n}\n\nexport function showLoader() {\n    if (loader) {\n        loader.classList.add('is-active');\n    }\n}\n\nexport function hideLoader() {\n    if (loader) {\n        loader.classList.remove('is-active');\n    }\n}\n\n\n export function showLoadMoreButton() {\n  loadBtn.classList.remove('hidden');\n}\n\n export function hideLoadMoreButton() {\n  loadBtn.classList.add('hidden');\n}\n\nexport function smoothScrollAfterLoad() {\n  const firstCard = document.querySelector('.js-gallery .item-gallery'); \n  if (!firstCard) return;\n\n  const cardHeight = firstCard.getBoundingClientRect().height;\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: \"smooth\"\n  });\n}\n\n\nexport function checkBtnVisibleStatus() {\n  \n  if (currentPage < maxPage) {\n    showLoadMoreButton();\n  } else if (!inpValue) {\n    hideLoadMoreButton();\n  }\n  else{\n    hideLoadMoreButton();\n    iziToast.error({\n      message: \"We're sorry, but you've reached the end of search results.\"\n      });\n  }\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport axios from \"axios\";\nimport { getImagesByQuery } from './js/pixabay-api';\nimport {createGallery} from './js/render-functions'\nimport { clearGallery } from './js/render-functions';\nimport {showLoader} from './js/render-functions'\nimport {hideLoader} from './js/render-functions'\nimport {checkBtnVisibleStatus} from './js/render-functions';\nimport {smoothScrollAfterLoad} from './js/render-functions';\n\n\n//======================================\n\nconst formEl = document.querySelector('.form');\nconst inputValue = document.querySelector('[type=\"text\"]');\nconst gallery = document.querySelector('.js-gallery');\nconst loadBtn = document.querySelector('.js-load-btn');\n\nlet inpValue;\nexport let currentPage;\nexport let maxPage = 0;\nconst pageSize = 15;\n\nformEl.addEventListener(\"submit\", async (e) => {\n   \n    e.preventDefault();\n\n    inpValue = inputValue.value.trim();\n    currentPage = 1;\n    showLoader();\n    try {\n       \n        const res = await getImagesByQuery(inpValue, currentPage);\n        const arrOfImage = res.hits;\n        \n        if (arrOfImage.length === 0 || !inpValue) {\n            iziToast.error({\n                message: 'Sorry, there are no images matching your search query. Please try again!'\n            });\n            clearGallery();\n            \n            return;\n        }\n        clearGallery();\n        createGallery(arrOfImage);\n\n        maxPage = Math.ceil(res.totalHits / pageSize);\n       \n    }\n\n    catch {\n        maxPage = 0;\n        iziToast.error({\n            message: 'Sorry, there are no images matching your search query. Please try again!'\n        })\n        clearGallery();\n    }\n    finally {\n        hideLoader();\n    }\n\n    checkBtnVisibleStatus();\n    formEl.reset();\n});\n\nloadBtn.addEventListener('click', async () => {\n    currentPage += 1;\n\n    checkBtnVisibleStatus();\n    try {\n        const res = await getImagesByQuery(inpValue, currentPage);\n        createGallery(res.hits);\n        smoothScrollAfterLoad();\n    } catch {\n        iziToast.error({\n            message: 'Sorry, there are no images matching your search query. Please try again!'\n        });\n    }\n})\n\n\n\n"],"names":["axios","getImagesByQuery","query","page","gallery","loader","loadBtn","galleryLight","createGallery","images","markup","image","SimpleLightbox","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","smoothScrollAfterLoad","firstCard","cardHeight","checkBtnVisibleStatus","currentPage","maxPage","iziToast","formEl","inputValue","inpValue","pageSize","e","res","arrOfImage"],"mappings":"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"}